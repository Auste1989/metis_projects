<html>

  <head>

    <script src="https://code.jquery.com/jquery-latest.js"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <!-- <link rel="/static/css/style.css"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

  </head>

  <body style="background-color: #E8F7FD;">
    <div class=title>
    <div class="jumbotron text-center" style="padding: 2px; height:180px; text-align: center; background-color: #041F30">
      <h1 style="font-size: 54pt; color: #FFFFFF;">Time Is Money <img src="../static/images/clock_icon.png" alt="Clock"></h1>
    </div>
    </div>

    <div class="container" style="margin-top:30px; border: 2px solid #041F30; padding: 10px;">
          <div class="row">
            <div class="col-sm">
              <h3>Where are you heading?</h3>
              <hr class="d-sm-none">

                  Origin Address
                  <input style="width: 250px; height: 25px;" id='origin'>

                  <div></div>

                  Destination Address
                  <input style="width: 210px; height: 25px;" id='destination'>

                  <div style="font-size: 10pt; font-style: italic"> e.g. 1033 West Van Buren Street, Chicago</div>
            </div>

            <div class="col-sm">
                  <h3>When do you wish to travel?</h3>
                  <hr class="d-sm-none">

                  <div>Are You Ready Now?</div>
                    <select id="time">
                      <option value='None'></option>
                      <option value='now'> Yes </option>
                      <option value='other'> No </option>
                    </select>

                    <!-- THIS SECTION SHOULD ONLY APPEAR IF No IS SELECTED -->
                    <!-- <div class="form-group" style="display: none; font-size: 18pt; border: 2px solid #03b4c8; padding: 5px;" id='time_selection'> -->

                    <div>Please specify date and time:</div>
                    <!-- Year -->
                      <select id="year">
                        <option value='2018'> 2018 </option>
                      </select>

                      <!-- Month -->
                      <select id="month">
                        <option value='None'></option>
                        <option value='1'> Jan </option>
                        <option value='2'> Feb </option>
                        <option value='3'> Mar </option>
                        <option value='4'> Apr </option>
                        <option value='5'> May </option>
                        <option value='6'> Jun </option>
                        <option value='7'> Jul </option>
                        <option value='8'> Aug </option>
                        <option value='9'> Sept </option>
                        <option value='10'> Oct </option>
                        <option value='11'> Nov </option>
                        <option value='12'> Dec </option>
                      </select>

                      <!-- Day -->
                      <select id="day">
                        <option value='None'></option>
                        <option value='1'> 1 </option>
                        <option value='2'> 2 </option>
                        <option value='3'> 3 </option>
                        <option value='4'> 4 </option>
                        <option value='5'> 5 </option>
                        <option value='6'> 6 </option>
                        <option value='7'> 7 </option>
                        <option value='8'> 8 </option>
                        <option value='9'> 9 </option>
                        <option value='10'> 10 </option>
                        <option value='11'> 11 </option>
                        <option value='12'> 12 </option>
                        <option value='13'> 13 </option>
                        <option value='14'> 14 </option>
                        <option value='15'> 15 </option>
                        <option value='16'> 16 </option>
                        <option value='17'> 17 </option>
                        <option value='18'> 18 </option>
                        <option value='19'> 19 </option>
                        <option value='20'> 20 </option>
                        <option value='21'> 21 </option>
                        <option value='22'> 22 </option>
                        <option value='23'> 23 </option>
                        <option value='24'> 24 </option>
                        <option value='25'> 25 </option>
                        <option value='26'> 26 </option>
                        <option value='27'> 27 </option>
                        <option value='28'> 28 </option>
                        <option value='29'> 29 </option>
                        <option value='30'> 30 </option>
                        <option value='31'> 31 </option>
                      </select>

                      <!-- Hour(s) -->
                      <select id="hours">
                        <option value='None'></option>
                        <option value='1'> 1 </option>
                        <option value='2'> 2 </option>
                        <option value='3'> 3 </option>
                        <option value='4'> 4 </option>
                        <option value='5'> 5 </option>
                        <option value='6'> 6 </option>
                        <option value='7'> 7 </option>
                        <option value='8'> 8 </option>
                        <option value='9'> 9 </option>
                        <option value='10'> 10 </option>
                        <option value='11'> 11 </option>
                        <option value='12'> 12 </option>
                      </select>

                      <!-- Minutes -->
                      <select id="minutes">
                        <option value='None'></option>
                        <option value='00'> 00 </option>
                        <option value='15'> 15 </option>
                        <option value='30'> 30 </option>
                        <option value='45'> 45 </option>
                      </select>


                      <select id="ampm">
                        <option value='AM'> AM </option>
                        <option value='PM'> PM </option>
                      </select>

              </div>

            <div class="button">
              <button id="submit" style="height: 50; width: 150; margin-left: 950px; margin-bottom: 15px;background-color: #F40F1B; color: white; font: 28;">LET'S GO</button>
            </div>

          </div>
        </div>
    </div>

  <div class="form-group" style="display: none; font-size: 18pt; border: 2px solid #03b4c8; padding: 5px;" id='result_div'>

    <div>
      You will arrive to your destination around <span id="ETA"></span>
    </div>

    <div>
      It will cost approximately $ <b><span id="fare"></span></b>.
    </div>

  </div>
</div>

</div>

  </div>

    <div class="container" style="margin-top:30px; padding: 10px;">

    <!-- Place holder for the map -->

    </div>
  </body>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script>

  $('#submit').click( () => { predict();});

  function predict(){
    let features = {
      'origin': $('#origin').val(),
      'destination': $('#destination').val(),
      'time': $('time').val(),
      'year': +$('#year').val(),
      'month': +$('#month').val(),
      'day': +$('#day').val(),
      'hours': +$('#hours').val(),
      'minutes': +$('#minutes').val()
    }

    console.log(features);

  $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/predict",  // Replace with URL of POST handler
    dataType: "json",
    async: true,
    data: JSON.stringify(features),
    success: (result_div) => {
      $('#ETA').html(result_div['ETA']);
      $('#fare').html(result_div['fare']);
      $('#result_div').show();
    },
    error: (the_result_div) => {
      alert('You messed it up, BIG TIME!');

    }
  })

};
</script>
</html>
