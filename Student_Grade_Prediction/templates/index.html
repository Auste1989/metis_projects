<html>

  <head>

    <script src="https://code.jquery.com/jquery-latest.js"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <!-- <link rel="/static/css/style.css"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

  </head>

  <body style="background-color: #e3faff;">
    <div class=title>
    <div class="jumbotron text-center" style="padding: 30px; height:180px; text-align: center; background-color: #FFFF00">
      <h1 style="font-size: 54pt">Will You Pass?</h1>
      <img src="/static/images/icon.png" alt="Glasses">
    </div>
    </div>

    <div class="container" style="margin-top:30px; border: 2px solid #03b4c8; padding: 10px;">
          <div class="row">
            <div class="col-sm-12">
              <h2>Tell me more about Yourself:</h2>
              <hr class="d-sm-none">

                  Your First Name
                  <input id='name'>

                  Your Gender
                  <select id="sex">
                    <option value='None'></option>
                    <option value='F'> Female </option>
                    <option value='M'> Male </option>
                  </select>

                  Your Age
                  <select id='age'>
                    <option value='None'></option>
                    <option value='15'> 15 </option>
                    <option value='16'> 16 </option>
                    <option value='17'> 17 </option>
                    <option value='18'> 18 </option>
                    <option value='19'> 19 </option>
                  </select>

                  Address
                  <select id="address">
                    <option value='None'></option>
                    <option value='U'> Urban </option>
                    <option value='R'> Rural </option>
                  </select>

                  Your Current Health
                  <select id="health">
                    <option value='None'></option>
                    <option value='1'> Very Bad </option>
                    <option value='2'> Bad </option>
                    <option value='3'> Average </option>
                    <option value='4'> Good </option>
                    <option value='5'> Very Good </option>
                  </select>

              </div>

        </div>
    </div>

    <div class="container-fluid" style="margin-top:30px">
        <div class="row" style="margin-left: 45px;">
          <div class="col-sm-4">
              <h2 style="font-size: 20pt;">School Related:</h2>

          <div>
            Discipline
            <select id="discipline">
              <option value='None'></option>
              <option value='maths'> Maths </option>
              <option value='portuguese'> Portuguese </option>
            </select>
          </div>

          <div>
            Seek to Continue Higher Education?
            <select id="higher">
              <option value='None'></option>
              <option value='1'> Yes </option>
              <option value='0'> No </option>
            </select>
          </div>

          <div>
            Number of Previous Failures
              <select id="failures">
                <option value='None'></option>
                <option value='0'> None </option>
                <option value='1'> 1 </option>
                <option value='2'> 2 </option>
                <option value='3'> 3 </option>
                <option value='4'> More than 3 </option>
              </select>

            <div class="explanation">
              (in this discipline)
            </div>

          </div>

          <div>
            Weekly Study Time (hours)
              <select id="studytime">
                <option value='None'></option>
                <option value='1'> 2h or less </option>
                <option value='2'> 2-5 </option>
                <option value='3'> 5-10 </option>
                <option value='4'> 10+ </option>
              </select>
          </div>

          <div>
            Extra Paid Classes
            <select id="paid">
              <option value='None'></option>
              <option value='1'> Yes </option>
              <option value='0'> No </option>
            </select>
          </div>

          <div class="explanation">
            <i>(for this discipline)</i>
          </div>

            <div>
              Number of Absences
              <input id='absences'>

              <div class="explanation">
                <i>(this year)</i>
              </div>
            </div>


          </div>

        <div class="col-sm-4">
            <h2 style="font-size: 20pt;">Family Matters:</h2>

        <div>
            Family Relationship
            <select id="famrel">
              <option value='None'></option>
              <option value='1'> Very Bad </option>
              <option value='2'> Bad </option>
              <option value='3'> Average </option>
              <option value='4'> Good </option>
              <option value='5'> Excellent </option>
            </select>
          </div>

          <div>
            Mother's Education Level
            <select id="medu">
              <option value='None'></option>
              <option value='0'> None </option>
              <option value='1'> Primary </option>
              <option value='2'> Unfinished Secondary </option>
              <option value='3'> Secondary </option>
              <option value='4'> Higher </option>
            </select>
          </div>

          <div>
            Father's Education Level
            <select id="fedu">
              <option value='None'></option>
              <option value='0'> None </option>
              <option value='1'> Primary </option>
              <option value='2'> Unfinished Secondary </option>
              <option value='3'> Secondary </option>
              <option value='4'> Higher </option>
            </select>
          </div>

        </div>

        <div class="col-sm-4">
            <h2 style="font-size: 20pt;">Fun Related (<u>be honest</u>):</h2>

          <div>
            Free Time
            <select id="freetime">
              <option value='None'></option>
              <option value='1'> Very Low </option>
              <option value='2'> Low </option>
              <option value='3'> Average </option>
              <option value='4'> High </option>
              <option value='5'> Very High </option>
            </select>
          </div>

          <div>
            Going Out with Friends
            <select id="goout">
              <option value='None'></option>
              <option value='1'> Very Low </option>
              <option value='2'> Low </option>
              <option value='3'> Average </option>
              <option value='4'> High </option>
              <option value='5'> Very High </option>
            </select>
          </div>

          <div>
            Weekend Alcohol Consumption
            <select id="walc">
              <option value='None'></option>
              <option value='1'> Very Low </option>
              <option value='2'> Low </option>
              <option value='3'> Average </option>
              <option value='4'> High </option>
              <option value='5'> Very High </option>
            </select>
          </div>

          <div class="button">
          <button id="submit" style="height: 50; width: 150; margin-left: 80px; margin-top: 25px; margin-bottom: 15px;background-color: #03b4c8; color: white; font: ">PREDICT</button>
          </div>

        <div class="form-group" style="display: none; font-size: 18pt; border: 2px solid #03b4c8; padding: 5px;" id='the_result_div'>

          <div>
            You will likely <span id="hard_predict"></span>.
            <img src='' id='img'>
          <div>
            Your chances of passing are <b><span id="soft_predict"></span>%</b>.
          </div>
          </div>

        </div>
      </div>

    </div>

  </div>

  </body>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script>

  $('#submit').click( () => { predict();
                              render_image(); });

  function render_image(prediction){

        let img = document.getElementById('img');
        console.log('the prediction is' + prediction);
        switch (prediction === 1) {

          case true:
           console.log('this is true ' + prediction)
           img.src='/static/images/content.png';
           break;

          case false:
           console.log('this is false ' + prediction)
           img.src='/static/images/saddened.png';
           break;
        }
      };

  function predict(){
    let features = {
      // 'Sex': $('select').val()
      'age': +$('#age').val(),
      'address': $('#address').val(),
      'Medu': +$('#medu').val(),
      'Fedu': +$('#fedu').val(),
      'studytime': +$('#studytime').val(),
      'failures': +$('#failures').val(),
      'paid': +$('#paid').val(),
      'higher': +$('#higher').val(),
      'famrel': +$('#famrel').val(),
      'freetime': +$('#freetime').val(),
      'goout': +$('#goout').val(),
      'Walc': +$('#walc').val(),
      'health': +$('#health').val(),
      'absences': +$('#absences').val(),
      'discipline': +$('#discipline').val()
    }

    console.log(features);

  $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/predict",  // Replace with URL of POST handler
    dataType: "json",
    async: true,
    data: JSON.stringify(features),
    success: (the_result_div) => {
      $('#hard_predict').html(the_result_div['prediction'] ? '<b>Pass</b>' : '<b>Fail</b>' );
      $('#soft_predict').html(the_result_div['prob_pass']);
      $('#the_result_div').show();

      render_image(the_result_div['prediction']);
    },
    error: (the_result_div) => {
      alert('You messed it up, BIG TIME!');

    }
  })

};
</script>
</html>
